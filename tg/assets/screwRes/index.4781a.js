System.register("chunks:///_virtual/autoAriverAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./textDraw.ts","./EventManger.ts","./screwGlobal.ts"],(function(o){var r,e,n,a,t,i,s,l,g,u,c,h,f,P;return{setters:[function(o){r=o.inheritsLoose},function(o){e=o.cclegacy,n=o._decorator,a=o.tween,t=o.Vec3,i=o.Color,s=o.UITransform,l=o.v3,g=o.Component},function(o){u=o.FishState,c=o.events},function(o){h=o.textDraw},function(o){f=o.default},function(o){P=o.screwGlobal}],execute:function(){var p;e._RF.push({},"07a61F6SyhJGqw9X5/yZhMC","autoAriverAI",void 0);var T=n.ccclass;n.property,o("autoAriverAI",T("autoAriverAI")(p=function(o){function e(){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(r=o.call.apply(o,[this].concat(n))||this).MOVE_SPEED=1500,r.map=void 0,r._run_speed=100,r._run_angle=0,r.moveTween=null,r.angleTween=null,r.fish=void 0,r.targetPoint=l(0,0,0),r.angleTime=.05,r.runChangeEndCallFunc=void 0,r.runChangeEndCallThis=void 0,r}r(e,o);var n=e.prototype;return n.hitFish=function(o){var r=this;r.runToPoint(o,r.gotoOrigin,r)},n.gotoOrigin=function(){var o=this;o.runToPoint(o.fish.center,(function(){o.fish.fishState=u.Idle,o.fish.isYun=!0}),o,.1)},n.runAngle=function(o,r,e,n){var t=this;t.stopTween(t.angleTween);var i=t.fish.node.angle%360;i<0&&(i+=360);var s=o%360;s<0&&(s+=360);var l=s-i;l>180&&(l-=360),l<-180&&(l+=360);var g=t.fish.node.angle+l;t.angleTween=a(t.fish.node).to(r,{angle:g}).call((function(){t.fish.node.angle+=360,t.fish.node.angle=o,e&&e.call(n)})).start()},n.runToPoint=function(o,r,e,n){void 0===n&&(n=-1);var l=this;l.stopTween(l.moveTween),l.fish.fishState=u.Move;var g=l.fish.box,c=n;if(-1==c){var f=g.convertToWorldSpaceAR(t.ZERO);c=t.distance(f,o)/l.MOVE_SPEED}l.moveTween&&l.moveTween.stop(),h.inst.drawLine(l.fish.node.getWorldPosition(),o,i.BLUE);var P=l.fish.node.parent.getComponent(s).convertToNodeSpaceAR(o);l.moveTween=a(l.fish.node).to(c,{position:P}).call((function(){l.fish.node.setPosition(P),r&&r.call(e)})).start()},n.runTopPoint=function(o){var r=this;r.fish.weibaoNode.active=!0,r.targetPoint.x=Math.floor(o.x),r.targetPoint.y=Math.floor(o.y);var e=r.fish.centerTop.x-r.fish.center.x,n=r.fish.centerTop.y-r.fish.center.y;Math.abs(e)<.01&&(e=0),Math.abs(n)<.01&&(n=0);var a=r.fish.center.clone();if(0==e&&n>0)a.y=P.carParkBoxMgr.leftTop.y;else if(0==e&&n<0)a.y=P.carParkBoxMgr.leftBottom.y;else if(0==n&&e>0)a.x=P.carParkBoxMgr.rightTop.x;else if(0==n&&e<0)a.x=P.carParkBoxMgr.leftTop.x;else{var t,s,l=n/e,g=r.fish.centerTop.y-l*r.fish.centerTop.x;e>0?(s=l*(t=P.carParkBoxMgr.rightTop.x)+g)>P.carParkBoxMgr.rightTop.y?t=((s=P.carParkBoxMgr.rightTop.y)-g)/l:s<P.carParkBoxMgr.rightBottom.y&&(t=((s=P.carParkBoxMgr.rightBottom.y)-g)/l):(s=l*(t=P.carParkBoxMgr.leftTop.x)+g)>P.carParkBoxMgr.leftTop.y?t=((s=P.carParkBoxMgr.leftTop.y)-g)/l:s<P.carParkBoxMgr.leftBottom.y&&(t=((s=P.carParkBoxMgr.leftBottom.y)-g)/l),a.x=t,a.y=s}h.inst.drawLine(r.fish.center,a,i.GREEN),r.runToPoint(a,r.doRunTopStopPoint,r)},n.doRunTopStopPoint=function(){var o=this,r=o.fish.node.getWorldPosition(),e=Math.floor(r.x),n=Math.floor(r.y),a=o.fish.node.angle;o.isNearEqual(e,P.carParkBoxMgr.rightTop.x)&&!o.isNearEqual(n,P.carParkBoxMgr.rightTop.y)?o.isNearEqual(a,0)?o.runToPoint(P.carParkBoxMgr.rightTop,o.doRunTopStopPoint,o):o.runAngle(0,o.angleTime,o.doRunTopStopPoint,o):o.isNearEqual(e,P.carParkBoxMgr.leftTop.x)&&!o.isNearEqual(n,P.carParkBoxMgr.leftTop.y)?o.isNearEqual(a,0)?o.runToPoint(P.carParkBoxMgr.leftTop,o.doRunTopStopPoint,o):o.runAngle(0,o.angleTime,o.doRunTopStopPoint,o):o.isNearEqual(n,P.carParkBoxMgr.leftBottom.y)?(o.isNearEqual(a,90)?o.runToPoint(P.carParkBoxMgr.leftBottom,o.doRunTopStopPoint,o):o.isNearEqual(a,270)?o.runToPoint(P.carParkBoxMgr.rightBottom,o.doRunTopStopPoint,o):a<180?o.runAngle(90,o.angleTime,o.doRunTopStopPoint,o):o.runAngle(270,o.angleTime,o.doRunTopStopPoint,o),o.isNearEqual(n,P.carParkBoxMgr.leftTop.y)):o.isNearEqual(n,P.carParkBoxMgr.leftTop.y)&&!o.isNearEqual(e,o.targetPoint.x)?o.isNearEqual(a,90)||o.isNearEqual(a,270)?o.runToPoint(l(o.targetPoint.x,P.carParkBoxMgr.leftTop.y,0),o.doRunTopStopPoint,o):e>o.targetPoint.x&&!o.isNearEqual(a,90)?o.runAngle(90,o.angleTime,o.doRunTopStopPoint,o):o.runAngle(270,o.angleTime,o.doRunTopStopPoint,o):o.isNearEqual(n,P.carParkBoxMgr.leftTop.y)&&o.isNearEqual(e,o.targetPoint.x)&&!o.isNearEqual(a,0)?o.runAngle(0,o.angleTime,o.doRunTopStopPoint,o):o.isNearEqual(n,P.carParkBoxMgr.leftTop.y)&&o.isNearEqual(e,o.targetPoint.x)?o.runToPoint(o.targetPoint,o.doRunTopStopPoint,o):o.isNearEqual(e,o.targetPoint.x)&&o.isNearEqual(n,o.targetPoint.y)&&(o.fish.openBaskBag(),P.carParkBoxMgr.checkHitFish(),P.topicBoxMgr.recycleScrew(),P.gameMgr.updateAutoUpBtn(),o.fish.weibaoNode.active=!1)},n.isNearEqual=function(o,r,e){return void 0===e&&(e=2),Math.abs(o-r)<e},n.runToHidePoint=function(){var o=this;o.fish.weibaoNode.active=!0;var r=o.fish.node.getWorldPosition(),e=Math.floor(r.x),n=Math.floor(r.y);o.isNearEqual(n,P.carParkBoxMgr.rightTop.y)?o.isNearEqual(n,P.carParkBoxMgr.rightTop.y)&&!o.isNearEqual(o.fish.node.angle,270)?o.runAngle(270,o.angleTime,o.runToHidePoint,o):o.isNearEqual(e,P.carParkBoxMgr.hidePosition.x)?(o.fish.fishState=u.Arrive,o.fish.node.active=!1,o.fish.weibaoNode.active=!1,0==P.screwCount.count&&P.carParkBoxMgr.isCheckFishArrive()&&f.inst.event.emit(c.winUIShow,P.colorMgr.getRecycleColorLength())):o.runToPoint(l(P.carParkBoxMgr.hidePosition.x,P.carParkBoxMgr.rightTop.y,0),o.runToHidePoint,o):o.runToPoint(l(e,P.carParkBoxMgr.rightTop.y,0),o.runToHidePoint,o)},n.runToPointDirect=function(o){var r=this;r.stopTween(r.moveTween),r.fish.fishState=u.Move;var e=r.fish.node.parent.getComponent(s).convertToNodeSpaceAR(o);r.moveTween=a(r.fish.node).to(.6,{position:e,angle:720}).call((function(){r.fish.node.setPosition(e),r.fish.node.angle=0,P.gameMgr.selectFishbg.active=!1,P.gameMgr.selectFishCount=0,P.gameMgr.isShowBtn=!0,r.fish.openBaskBag(),P.carParkBoxMgr.checkHitFish(),P.topicBoxMgr.recycleScrew(),P.gameMgr.updateAutoUpBtn()})).start()},n.runChangeColor=function(o,r){var e=this;e.runChangeEndCallFunc=o,e.runChangeEndCallThis=r,e.isNearEqual(e.fish.node.angle,90)?e.runToPoint(l(P.carParkBoxMgr.maxLeftPosition.x,e.fish.center.y,0),e.runChangeColor_changeColor,e,.5):e.isNearEqual(e.fish.node.angle,270)&&e.runToPoint(l(P.carParkBoxMgr.maxRightPosition.x,e.fish.center.y,0),e.runChangeColor_changeColor,e,.5)},n.runChangeColor_changeColor=function(){var o=this,r=P.carParkBoxMgr.getRandomColor(o.fish.fishSize);o.fish.fishColor=r,o.isNearEqual(o.fish.node.angle,90)?o.fish.node.angle=270:o.isNearEqual(o.fish.node.angle,270)&&(o.fish.node.angle=90),o.runToPoint(o.fish.center,o.runChangeColor_changeColor_2,o,.5)},n.runChangeColor_changeColor_2=function(){var o=this;o.runAngle(o.fish.conf.direction,.2,o.runChangeColor_changeColor_3,o)},n.runChangeColor_changeColor_3=function(){var o=this;o.fish.fishState=u.Idle,o.runChangeEndCallFunc&&o.runChangeEndCallFunc.call(o.runChangeEndCallThis)},n.stopTween=function(o){o&&o.stop()},e}(g))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/autoGameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseUI.ts","./screwGlobal.ts"],(function(e){var t,o,n,a,i,r,s,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.sp},function(e){c=e.baseUI},function(e){u=e.screwGlobal}],execute:function(){var l,p,f,h,m;i._RF.push({},"03d14AsU6FM8IyqOmwIZ/7e","autoGameUI",void 0);var y=r.ccclass,I=r.property;e("autoGameUI",(l=y("autoGameUI"),p=I({type:s.Skeleton}),l((m=t((h=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,n(t,"ske",m,a(t)),t.eventName="autoGameUI",t}o(t,e);var i=t.prototype;return i.onLoad=function(){var t=this;e.prototype.onLoad.call(this),t.ske.setEndListener((function(e){u.gameMgr.autoGameFish(),t.hideUI()}))},i.showUI=function(t){e.prototype.showUI.call(this),this.ske.setAnimation(0,"animation",!1)},t}(c)).prototype,"ske",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/basePlank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hole.ts","./screw.ts","./holeImg.ts","./ResourceManger.ts","./screwGlobal.ts"],(function(e){var n,o,t,i,r,a,l,s,c,d,p,u,g,y,h,f,k,v,C,m,b,P,w,_,S,I,x,T,B,D,L,M;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,l=e._decorator,s=e.Sprite,c=e.Prefab,d=e.Node,p=e.CCInteger,u=e.Color,g=e.Vec3,y=e.RigidBody2D,h=e.instantiate,f=e.UITransform,k=e.ERigidBody2DType,v=e.BoxCollider2D,C=e.PolygonCollider2D,m=e.view,b=e.Vec2,P=e.assetManager,w=e.SpriteFrame,_=e.Widget,S=e.randomRangeInt,I=e.UIOpacity,x=e.Component},function(e){T=e.hole},function(e){B=e.screw},function(e){D=e.holeImg},function(e){L=e.default},function(e){M=e.screwGlobal}],execute:function(){var A,H,R,z,F,N,G,U,V,E,O,Z,j,W,J,K,X,q,Q,Y,$;a._RF.push({},"e1ef8oJweVKRaaDZzZf2dzx","basePlank",void 0);var ee=l.ccclass,ne=l.property;e("basePlank",(A=ee("basePlank"),H=ne(s),R=ne(s),z=ne(s),F=ne(c),N=ne(c),G=ne(c),U=ne(d),V=ne(p),E=ne(p),A((j=n((Z=function(e){function n(){for(var n,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,t(n,"border",j,i(n)),t(n,"bg",W,i(n)),t(n,"mask",J,i(n)),t(n,"screwCopy",K,i(n)),t(n,"holeCopy",X,i(n)),t(n,"holeImgCopy",q,i(n)),t(n,"holeLayer",Q,i(n)),t(n,"editPlankType",Y,i(n)),t(n,"editPlankIndex",$,i(n)),n.endHole=null,n.usedScrewList=[],n._polyPoints=[],n.tempPlankColor=new u(255,255,255,255),n._plankType=void 0,n._plankIndex=void 0,n._plankColor=new u(255,255,255,255),n.rigidBody2D=void 0,n._conf=void 0,n.plankGroupNode=void 0,n._screwCount=0,n.lastPoint=new g(0,0,0),n.lastAngle=0,n.isPhysics=!1,n.isMaskActive=null,n}o(n,e);var a=n.prototype;return a.onLoad=function(){this.rigidBody2D=this.node.getComponent(y)},a.setPlankConf=function(e,n){var o=this;o._conf=e,o.isPhysics=!1,o.node.angle=0,o.plankGroupNode=n;var t=L.instance.get_json("plankTypeIndexConf")[e.plankType+"_"+e.plankIndex].posi;o.plankType=e.plankType,o.plankIndex=e.plankIndex,o.node.setPosition(e.x,e.y,0);var i=t.length;o.screwCount=i,o.usedScrewList.length=0,o.endHole&&(o.endHole.node.active=!1);for(var r=0,a=o.getColor(),l=Math.floor(i/2),s=0;s<i&&!(M.colorMgr.getSumColorLength()<=0);s++){M.colorMgr.checkSumColorTotal(a)&&s!=l||(a=o.getColor());var c=h(o.holeImgCopy),d=c.getComponent(D);o.holeLayer.addChild(c),d.node.active=!0;var p=h(o.screwCopy),u=p.getComponent(B);o.holeLayer.addChild(p),u.bindPlank=o,u.node.active=!0,u.node.name="screw_"+r,o.usedScrewList[r]=u;var g=t[s][0],y=t[s][1];d.node.setPosition(g,y,0),u.node.setPosition(g,y,0),u.screwColor=a,M.colorMgr.addCurUseColorTotal(a),r++}},a.getColor=function(){var e=M.carParkBoxMgr.getScrewColor();return null!=e&&M.colorMgr.checkSumColorTotal(e)||(e=M.colorMgr.getRandomColor()),e},a.resetConf=function(){var e=this;e.setPlankConf(e._conf,e.plankGroupNode)},a.noticePlank=function(){for(var e=this,n=null,o=0,t=e.usedScrewList.length,i=0;i<t;i++)if(e.usedScrewList[i].node.active&&(n=e.usedScrewList[i],o++),o>1)return;if(n){if(!e.endHole){var r=h(e.holeCopy);e.node.parent.addChild(r),e.endHole=r.getComponent(T),e.endHole.node.name=e.node.name+"_hole"}var a=n.node.getComponent(f),l=n.node.getPosition();n.node.setSiblingIndex(-1);var s=a.convertToWorldSpaceAR(g.ZERO),c=e.endHole.node.parent.getComponent(f).convertToNodeSpaceAR(s),d=e.node.getScale();e.endHole.node.setPosition(c.x,c.y,0),e.endHole.bindHingeJoint2D(e.rigidBody2D,l.x*d.x,l.y*d.y),e.endHole.node.active=!0,M.topicBoxMgr.isUpdataAvailableScrew=!0}else e.endHole&&(e.endHole.node.active=!1);e.isPhysics=!0,e.rigidBody2D.type!=k.Dynamic&&(e.rigidBody2D.type=k.Dynamic,e.rigidBody2D.wakeUp())},a.changePhysicsGroup=function(e){for(var n=this,o=n.node.getComponentsInChildren(y),t=o.length,i=0;i<t;i++)o[i].group=e;var r=n.node.getComponentsInChildren(v);t=r.length;for(var a=0;a<t;a++)r[a].group=e,r[a].apply();var l=n.node.getComponentsInChildren(C);t=l.length;for(var s=0;s<t;s++)l[s].group=e,l[s].apply()},a.clickScrew=function(e){e.currentTarget.getComponent(B).hideScrew()},a.update=function(e){var n=this;if(n.node.active&&!n.isMaskActive)return n.isPhysics?(n.checkRecyclePlank(),void(n.getLastStatus()&&(M.topicBoxMgr.isUpdataAvailableScrew=!0))):void 0},a.getLastStatus=function(e){void 0===e&&(e=!1);var n=this,o=n.node.getPosition(),t=Math.abs(o.x-n.lastPoint.x),i=Math.abs(o.y-n.lastPoint.y),r=Math.abs(n.node.angle-n.lastAngle);return e&&(n.node.getPosition(n.lastPoint),n.lastAngle=n.node.angle),t>10||i>10||r>10},a.checkRecyclePlank=function(){this.node.getWorldPosition().y<-m.getVisibleSize().height/2&&this.recyclePlank()},a.recyclePlank=function(){var e=this;e.node.active=!1,e.plankGroupNode.checkAllPlank(),e.endHole&&e.endHole.node.removeFromParent(),e.node.removeFromParent()},a.onDisable=function(){var e=this;e.rigidBody2D.type=k.Kinematic,e.rigidBody2D.linearVelocity=b.ZERO,e.rigidBody2D.angularVelocity=0},a.setMaskActive=function(e){var n=this;n.bg.node.active=0!=n.node.parent.getSiblingIndex(),n.isMaskActive=e,n.scheduleOnce((function(){n.node.getComponent(C).enabled=!e})),n.node.getChildByName("mask").active=e,n.node.getChildByName("holeNode").active=!e},a.setColorMask=function(e){this.mask.node.getChildByName("color").getComponent(s).color=e,this.border.color=e},a.checkScrewIsAvailable=function(){var e=this;if(!e.isMaskActive)for(var n=e.usedScrewList.length,o=0;o<n;o++){var t=e.usedScrewList[o];t.node.active&&t.checkIsAvailable()}},a.getScrewList=function(){for(var e=[],n=this.usedScrewList.length,o=0;o<n;o++){var t=this.usedScrewList[o];t.node.active&&!t.useFlag&&e.push(t)}return e},r(n,[{key:"plankType",get:function(){return this._plankType},set:function(e){var n=this;n._plankType=e;var o=P.getBundle("screwRes"),t=o.get("Image/plank/type"+e+"/spriteFrame",w),i=o.get("Image/plank/border"+e+"/spriteFrame",w);n.bg.spriteFrame=t,n.mask.spriteFrame=t,n.mask.node.getChildByName("color").getComponent(_).updateAlignment(),i&&(n.border.spriteFrame=i),n.border.node.active=null!=i;var r=n.node.getComponent(C),a=L.instance.get_json("plankTypeConf")[e].points,l=a.length;n._polyPoints.length=l;for(var s=0;s<l;s++)n._polyPoints[s]?n._polyPoints[s].set(a[s][0],a[s][1]):n._polyPoints[s]=new b(a[s][0],a[s][1]);r.points=n._polyPoints,r.apply();var c=[12481653,12481721,8811710,7640510,7651006,7650955,12107380,12488564,4895181,6449612];if(n._plankType>=1&&n._plankType<=20){var d=S(0,c.length-1);n.tempPlankColor.fromHEX(c[d]),n.plankColor=n.tempPlankColor,n.bg.node.getComponent(I).opacity=232}}},{key:"plankIndex",get:function(){return this._plankIndex},set:function(e){this._plankIndex=e}},{key:"plankColor",get:function(){return this._plankColor},set:function(e){this._plankColor.set(e),this.bg.color=this._plankColor}},{key:"screwCount",get:function(){return this._screwCount},set:function(e){this._screwCount=e}}]),n}(x)).prototype,"border",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=n(Z.prototype,"bg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=n(Z.prototype,"mask",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=n(Z.prototype,"screwCopy",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=n(Z.prototype,"holeCopy",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=n(Z.prototype,"holeImgCopy",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=n(Z.prototype,"holeLayer",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=n(Z.prototype,"editPlankType",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$=n(Z.prototype,"editPlankIndex",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=Z))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/carParkBoxManagr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fish.ts","./Global.ts","./Enums.ts","./textDraw.ts","./textLevel.ts","./EventManger.ts","./shitou.ts","./screwGlobal.ts"],(function(e){var t,i,r,o,n,a,s,l,h,c,f,u,g,p,m,k,C,v,d,P,L,y,F,b,T,x,w,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,h=e.Node,c=e.Prefab,f=e.Animation,u=e.Label,g=e.v3,p=e.UITransform,m=e.Color,k=e.randomRangeInt,C=e.Component,v=e.instantiate},function(e){d=e.fish},function(e){P=e.Global},function(e){L=e.FishState,y=e.events},function(e){F=e.textDraw},function(e){b=e.textLevel},function(e){T=e.default},function(e){x=e.shitou,w=e.UnlockType},function(e){S=e.screwGlobal}],execute:function(){var M,A,B,N,D,R,U,W,z,E,G,I,_,H,O,V,j,J,q,K,Q,X,Y;s._RF.push({},"216c3lf6dxH5bldR7hl137M","carParkBoxManagr",void 0);var Z=l.ccclass,$=l.property;e("carParkBoxManagr",(M=Z("carParkBoxManagr"),A=$(h),B=$(h),N=$(h),D=$(h),R=$(h),U=$(c),W=$(h),z=$([x]),E=$(f),G=$(u),M((H=t((_=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"content",H,o(t)),r(t,"map",O,o(t)),r(t,"hidePosiNode",V,o(t)),r(t,"maxLeftPosi",j,o(t)),r(t,"maxRightPosi",J,o(t)),r(t,"fishCopy",q,o(t)),r(t,"fishParent",K,o(t)),r(t,"carParkList",Q,o(t)),t.carParkFish=[null,null,null,null,null,null,null],t.leftTop=g(),t.rightTop=g(),t.leftBottom=g(),t.rightBottom=g(),t.hidePosition=g(),t.maxLeftPosition=g(),t.maxRightPosition=g(),t.fishList=[],r(t,"carTip",X,o(t)),r(t,"loseLabel",Y,o(t)),t.loseWait=2,t.hasScrewFish=[],t.noScrewFish=[],t.maxScrewNum=0,t.conf=[],t.frameCount=2,t.fishColorType={},t.changeColorFish=[],t.changeAnimaCount=0,t.checkMoveFish=[],t.checkNoMoveFish=[],t.fishDepthList=[],t.isFirstCheck=!0,t}i(t,e);var s=t.prototype;return s.onLoad=function(){var e=this;S.carParkBoxMgr=e;var t=e.map.getComponent(p),i=t.width/2,r=t.height/2,o=g(-i,r,0),n=g(i,r,0),a=g(-i,-r,0),s=g(i,-r,0),l=g();t.convertToWorldSpaceAR(o,l),e.leftTop.x=Math.floor(l.x),e.leftTop.y=Math.floor(l.y),t.convertToWorldSpaceAR(n,l),e.rightTop.x=Math.floor(l.x),e.rightTop.y=Math.floor(l.y),t.convertToWorldSpaceAR(a,l),e.leftBottom.x=Math.floor(l.x),e.leftBottom.y=Math.floor(l.y),t.convertToWorldSpaceAR(s,l),e.rightBottom.x=Math.floor(l.x),e.rightBottom.y=Math.floor(l.y),e.hidePosiNode.getWorldPosition(l),e.hidePosition.x=Math.floor(l.x),e.hidePosition.y=Math.floor(l.y),e.maxLeftPosi.getWorldPosition(l),e.maxLeftPosition.x=Math.floor(l.x),e.maxLeftPosition.y=Math.floor(l.y),e.maxRightPosi.getWorldPosition(l),e.maxRightPosition.x=Math.floor(l.x),e.maxRightPosition.y=Math.floor(l.y),e.map.active=!1;var h=e.content.getChildByName("carPark");h.setPosition(0,0,0),e.fishList=h.getComponentsInChildren(d),e.carTip.node.active=!1;for(var c=e.carParkList.length,f=0;f<c;f++)e.carParkList[f].setVideoSuccessCall((function(){e.openCarPark()}),e)},s.getCheckAllFish=function(){for(var e=this,t=e.carParkList.length,i=0;i<t;i++)if(e.carParkList[i].isUser==w.None){if(null==e.carParkFish[i])return!0;if(e.carParkFish[i].isPlayRecycleScrew)return!0;if(e.carParkFish[i].fishState!=L.PickUp)return!0}return!1},s.isLoseGame=function(){for(var e=this,t=e.carParkList.length,i=0,r=0;r<t;r++)e.carParkList[r].isUser==w.None&&i++;S.gameMgr.selectFishbg.active=!1,e.unscheduleAllCallbacks(),i>=t?T.inst.event.emit(y.loseUIShow):T.inst.event.emit(y.reviveUIShow)},s.openCheckGame=function(){var e=this;e.loseWait=2,e.unscheduleAllCallbacks(),e.schedule((function(){e.checkFish()}),1)},s.checkFish=function(){var e=this;P.isPlayProper?e.setWaitTime(1,"道具动画播放中"):P.isPlayAd?e.setWaitTime(1,"广告中"):P.isOpenSetting?e.setWaitTime(1,"打开了设置界面"):e.getCheckAllFish()?e.setWaitTime(1,"还有车位未完成"):P.isUserProper?e.setWaitTime(1,"打开了道具"):S.topicBoxMgr.getCheckAllPlank()?e.setWaitTime(1,"还有板子未完成"):(e.loseWait--,e.loseLabel&&(e.loseLabel.string="游戏结束倒计时："+e.loseWait),e.loseWait<=0&&e.isLoseGame())},s.setWaitTime=function(e,t){var i=this;i.loseWait=e,i.loseLabel&&(i.loseLabel.string=t)},s.openCarPark=function(){for(var e=this,t=e.carParkList.length,i=0;i<t;i++)if(e.carParkList[i].isUser!=w.None)return e.carParkList[i+1]&&(e.carParkList[i+1].isUser=e.carParkList[i].isUser),void(e.carParkList[i].isUser=w.None)},s.getCarParkPosition=function(e){for(var t=this,i=t.carParkFish.length,r=0;r<i;r++)if(null==t.carParkFish[r]&&t.carParkList[r].isUser==w.None)return t.carParkFish[r]=e,t.checkCarTip(),t.carParkList[r].node.getWorldPosition();return null},s.deleteCarParkFish=function(e){var t=this,i=t.carParkFish.indexOf(e);-1!=i&&(t.carParkFish[i]=null),t.checkCarTip(),S.gameMgr.updateAutoUpBtn()},s.checkCarTip=function(){for(var e=this,t=e.carParkList.length,i=0,r=0;r<t;r++)null==e.carParkFish[r]&&e.carParkList[r].isUser==w.None&&i++;switch(i){case 0:e.carTip.node.active=!0,e.carTip.play("carTop_0_anima");break;case 1:e.carTip.node.active=!0,e.carTip.play("carTop_1_anima");break;default:e.carTip.stop(),e.carTip.node.active=!1}},s.initShitouStatus=function(e){void 0===e&&(e=4);for(var t=this,i=t.carParkList.length,r=!0,o=0;o<i;o++)o<e?t.carParkList[o].isUser=w.None:r?(t.carParkList[o].isUser=w.Share,r=!1):t.carParkList[o].isUser=w.Video,t.carParkFish[o]=null;t.checkCarTip()},s.getCarParkFish=function(e){for(var t=this,i=t.carParkFish.length,r=[],o=0;o<i;o++)if(null!=t.carParkFish[o]&&r.push(t.carParkFish[o]),r.length>=e)return r;return r},s.recycleCarParkFishScrew=function(){var e=this,t=e.carParkFish,i=t.length;e.hasScrewFish.length=0,e.noScrewFish.length=0;for(var r=0;r<i;r++){var o=t[r];o&&o.fishState==L.PickUp&&(o.collectScrewNum>0?e.hasScrewFish.push(o):e.noScrewFish.push(o))}i=e.hasScrewFish.length;for(var n=0;n<i;n++){e.hasScrewFish[n].recycleScrew()}i=e.noScrewFish.length;for(n=0;n<i;n++){e.noScrewFish[n].recycleScrew()}},s.drawMapLine=function(){var e=this;F.inst.drawLine(e.leftTop,e.rightTop,m.RED),F.inst.drawLine(e.leftBottom,e.rightBottom,m.RED),F.inst.drawLine(e.leftTop,e.leftBottom,m.RED),F.inst.drawLine(e.rightTop,e.rightBottom,m.RED)},s.start=function(){},s.onEnable=function(){},s.setConf=function(e){var t=this;t.isFirstCheck=!0,t.conf=e,S.colorMgr.resetAllColorTotal(P.gameLevel),t.initShitouStatus(4),t.fishList.length=0,t.frameCreateCar()},s.frameCreateCar=function(){var e=n(a().mark((function e(){var t,i,r,o,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,i=0;case 2:if(!(i<t.frameCount)){e.next=22;break}if(r=t.fishList.length,null!=t.conf[r]){e.next=7;break}return setTimeout((function(){t.maxScrewNum=S.colorMgr.getSumColorLength(),S.screwCount.count=t.maxScrewNum,t.createCarEnd(),t.openCheckGame()}),200),e.abrupt("return");case 7:o=t.conf[r],n=v(t.fishCopy),s=n.getComponent(d),t.fishList.push(s),n.setPosition(o.pos.x,o.pos.y,o.pos.z),s.preSetConf(o),t.fishParent.addChild(s.node),s.setFishConf(o),s.node.active=!0,s.node.name="fish"+r,s.id=r,S.colorMgr.addSumColorTotalByCount(s.maxScrewNum,s.fishColor);case 19:i++,e.next=2;break;case 22:setTimeout((function(){t.frameCreateCar()}),0);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.createCarEnd=function(){var e=n(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.checkHitFish();case 3:setTimeout((function(){S.gameMgr.resetGame()}),0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.isCheckFishArrive=function(){for(var e=this.fishList.length,t=0;t<e;t++){if(this.fishList[t].node.active)return!1}return!0},s.isCheckFishIsMove=function(){for(var e=this,t=e.carParkFish.length,i=!1,r=0;r<t;r++)if(null==e.carParkFish[r]&&e.carParkList[r].isUser==w.None){i=!0;break}if(!i)return!1;t=e.fishList.length;for(r=0;r<t;r++){if(e.fishList[r].fishState==L.Idle)return!0}return!1},s.getFishById=function(e){for(var t=this.fishList.length,i=0;i<t;i++){var r=this.fishList[i];if(r.id==e)return r}return null},s.getFishList=function(){return this.fishList},s.moveToChangeColorFish=function(){var e=this,t=e.fishList.length;for(var i in e.fishColorType)e.fishColorType[i].length=0;e.changeColorFish.length=0;for(var r=0;r<t;r++){var o=e.fishList[r];if(o.fishState==L.Idle)e.fishColorType[o.fishSize]||(e.fishColorType[o.fishSize]=[]),e.fishColorType[o.fishSize].push(o.fishColor),e.changeColorFish.push(o),e.changeAnimaCount++,o.node.getPosition().x<=0?o.runAngle(90,.5,e.angleCallEnd,e):o.runAngle(270,.5,e.angleCallEnd,e)}},s.getRandomColor=function(e){var t=this,i=t.fishColorType[e].length;if(i<=0)return null;var r=k(0,i),o=t.fishColorType[e][r];return t.fishColorType[e].splice(r,1),o},s.angleCallEnd=function(){var e=this;if(e.changeAnimaCount--,!(e.changeAnimaCount>0)){e.changeAnimaCount=0;for(var t=e.changeColorFish.length,i=0;i<t;i++){var r=e.changeColorFish[i];e.changeAnimaCount++,r.runChangeColor(e.animaCallEnd,e)}}},s.animaCallEnd=function(){this.changeAnimaCount--,this.changeAnimaCount>0||(S.gameMgr.isShowBtn=!0,S.gameMgr.notUserClickBg.active=!1)},s.checkHitFish=function(){var e=n(a().mark((function e(){var t,i,r,o,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((t=this).checkMoveFish.length=0,t.checkNoMoveFish.length=0,t.fishDepthList.length=0,i=0;i<t.fishDepthList.length;i++)t.fishDepthList[i].length=0;if(r=t.fishList.length,t.isFirstCheck)for(i=0;i<r;i++)t.fishList[i].rigidBody2D.node.active=!0;i=0;case 8:if(!(i<r)){e.next=19;break}if((o=t.fishList[i]).node.active){e.next=12;break}return e.abrupt("continue",16);case 12:o.checkHitFish?t.checkNoMoveFish.push(o):t.checkMoveFish.push(o),n=o.getFishDepth(),null==t.fishDepthList[n]&&(t.fishDepthList[n]=[]),t.fishDepthList[n].push(o);case 16:i++,e.next=8;break;case 19:if(t.isFirstCheck)for(i=0;i<r;i++)t.fishList[i].rigidBody2D.node.active=!1;t.isFirstCheck=!1,P.debugMode&&console.log("鱼深度列表：",t.fishDepthList);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.getScrewColor=function(){for(var e=this.fishDepthList.length,t=0;t<e;t++){var i=this.fishDepthList[t];if(!(null==i||i.length<=0))if(0!=t)for(var r=i.length,o=0;o<r;o++){var n=i[o].fishColor;if(S.colorMgr.checkSumColorTotal(n))return P.debugMode&&console.log("获取颜色层 ",t," 颜色 ",n),n}else{var a=i[k(0,i.length)].fishColor;if(S.colorMgr.checkSumColorTotal(a))return a}}return null},s.getLevelConf=function(){var e=this.content.getChildByName("carParkEdit"),t=e.getComponent(b);t&&t.updateAllChildren();for(var i=[],r=e.children.length,o=0;o<r;o++){var n=e.children[o];if(n.active){var a=n.getComponent(d).getFishConf();i.push(a)}}return console.log("鱼配置 ："),console.log(i),console.log(JSON.stringify(i)),i},t}(C)).prototype,"content",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(_.prototype,"map",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(_.prototype,"hidePosiNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(_.prototype,"maxLeftPosi",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(_.prototype,"maxRightPosi",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(_.prototype,"fishCopy",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(_.prototype,"fishParent",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(_.prototype,"carParkList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=t(_.prototype,"carTip",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(_.prototype,"loseLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=_))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/fish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./autoAriverAI.ts","./Global.ts","./Enums.ts","./textDraw.ts","./screw.ts","./ThirdPartyManager.ts","./screwGlobal.ts"],(function(e){var i,t,n,o,r,a,s,c,l,h,u,f,d,S,b,g,p,w,v,y,m,k,C,_,x,T,B,A,F,z,P,L;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,s=e._decorator,c=e.sp,l=e.Enum,h=e.Label,u=e.Node,f=e.RigidBody2D,d=e.BoxCollider2D,S=e.size,b=e.v3,g=e.randomRangeInt,p=e.tween,w=e.Vec3,v=e.UITransform,y=e.Color,m=e.PhysicsSystem2D,k=e.ERaycast2DType,C=e.Component},function(e){_=e.autoAriverAI},function(e){x=e.Global},function(e){T=e.FishColor,B=e.FishSize,A=e.FishState},function(e){F=e.textDraw},function(e){z=e.screw},function(e){P=e.ThirdPartyManager},function(e){L=e.screwGlobal}],execute:function(){var M,N,R,I,D,E,H,Y,O,j,W,G,U,V,X,q,J,K,Z,Q,$;a._RF.push({},"0a81bh2usNHOr4BJiSGMxIq","fish",void 0);var ee=s.ccclass,ie=s.property;e("fish",(M=ee("fish"),N=ie(c.Skeleton),R=ie(c.Skeleton),I=ie(c.Skeleton),D=ie({type:l(T),visible:!0}),E=ie({type:l(B),visible:!0}),H=ie({type:h,visible:!0}),Y=ie({type:u}),O=ie({type:f}),j=ie({type:d}),M((U=i((G=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(i=e.call.apply(e,[this].concat(r))||this).ariver=void 0,i.id=-1,i.sizeList=[S(68,104),S(70,120),S(70,134)],i.screwList=[],i.collectScrewNum=0,n(i,"fishSke",U,o(i)),n(i,"beibaoSke",V,o(i)),n(i,"yunSke",X,o(i)),n(i,"editfishColor",q,o(i)),n(i,"editfishSize",J,o(i)),n(i,"fishStateLabel",K,o(i)),n(i,"weibaoNode",Z,o(i)),n(i,"rigidBody2D",Q,o(i)),n(i,"boxTrans",$,o(i)),i.oriPosi=b(),i.animaAction="",i._isYun=!1,i._fishState=A.Idle,i.screwScale=b(),i.screwPos=[],i._fishTween=null,i.byScale=b(1.15,1.15),i.conf=void 0,i._fishColor=T.Blue,i.startScrewIndex=0,i.maxScrewNum=4,i._fishSize=B.size_4,i.box=void 0,i.leftTop=b(),i.rightTop=b(),i.leftBottom=b(),i.rightBottom=b(),i.center=b(),i.centerTop=b(),i.centerBottom=b(),i._hitFish=null,i.isCheckHitFish=!1,i.TIME_CONFIG={MAX:2,DISTANCE_FACTOR:.003},i._recycleScrewCallBack=null,i._recycleScrewThisObj=null,i.recycleScrewCount=0,i.isPlayRecycleScrew=!1,i}t(i,e);var a=i.prototype;return a.onLoad=function(){var e=this;e.ariver=e.node.addComponent(_),e.ariver.fish=this;var i=e.node.getChildByName("hole");e.screwList=i.getComponentsInChildren(z);for(var t=e.screwList.length,n=0;n<t;n++){var o=e.screwList[n];e.screwPos[n]=o.node.getPosition()}e.screwScale=e.screwList[0].node.getScale();var r=0;e.fishSke.setEndListener((function(i){if(!(++r<30)){r=0;var t=["Yan1","Yan2","Yan3"];e.fishSke.setAnimation(0,t[g(0,t.length)],!0)}})),e.beibaoSke.setEndListener((function(i){var t=i.animation.name;t.includes("daiji")||(t.includes("dakai")&&e.beibaoSke.setAnimation(0,"dakaidaiji"+e.animaAction,!1),t.includes("guanbi")&&!t.includes("guanbidaiji")&&(e.beibaoSke.setAnimation(0,"guanbidaiji"+e.animaAction,!1),e.ariver.runToHidePoint()))})),e.yunSke.setEndListener((function(i){e.isYun=!1})),e.weibaoNode.active=!1},a.setFishConf=function(e){var i=this;i.unscheduleAllCallbacks(),i.conf=e,i.collectScrewNum=0,i.node.setPosition(e.pos.x,e.pos.y,e.pos.z),i.node.angle=e.direction,i.fishState=A.Idle,i.node.getPosition(i.oriPosi),i.fishSize=e.sizeType,i.fishColor=L.colorMgr.getColor(),i.node.setScale(e.scale,e.scale,1),i.initFish();var t=["Yan1","Yan2","Yan3"];i.fishSke.setAnimation(0,t[g(0,t.length)],!0),i._fishTween&&(i._fishTween.stop(),i._fishTween=null);var n=i.node.getChildByName("content");i._fishTween=p(n).set({scale:w.ONE}).to(.2,{scale:i.byScale}).to(.2,{scale:w.ONE}).call(i.screwRecycleCallBack,i)},a.preSetConf=function(e){this.node.setPosition(e.pos.x,e.pos.y)},a.updateHoleBox=function(e){for(var i=this.screwList.length,t=0;t<i;t++){this.screwList[t].node.active=t<e}},a.getFishConf=function(){return{colorType:this.fishColor,sizeType:this.fishSize,scale:this.node.scale.x,pos:b(Math.round(this.node.position.x),Math.round(this.node.position.y),0),direction:Math.abs(this.node.angle)%360}},a.initFish=function(){var e=this;e.box=e.node.getComponent(v);var i=e.box.getComponent(v),t=i.width/2-3,n=i.height/2-3,o=b(-t,1200,0),r=b(t,1200,0),a=b(-t,n,0),s=b(t,n,0),c=b(0,n,0);e.box.convertToWorldSpaceAR(o,e.leftTop),e.box.convertToWorldSpaceAR(r,e.rightTop),e.box.convertToWorldSpaceAR(a,e.leftBottom),e.box.convertToWorldSpaceAR(s,e.rightBottom),e.box.convertToWorldSpaceAR(c,e.centerBottom),e.box.convertToWorldSpaceAR(w.ZERO,e.center),e.box.convertToWorldSpaceAR(b(0,1200,0),e.centerTop)},a.draw=function(){var e=this;F.inst.drawLine(e.leftTop,e.leftBottom,y.RED),F.inst.drawLine(e.rightTop,e.rightBottom,y.RED)},a.start=function(){this.node.on(u.EventType.TOUCH_END,this.handleClick,this)},a.handleClick=function(){var e=this;if(e.fishState==A.Idle&&!e.isYun)if(e.node.setSiblingIndex(-1),x.setting_shake&&P.instance.vibrateShort(),L.gameMgr.selectFishbg.active){if(L.gameMgr.selectFishCount>=1)return;L.gameMgr.selectFishCount++;var i=L.carParkBoxMgr.getCarParkPosition(e);i&&(e.fishState=A.Move,e.ariver.runToPointDirect(i))}else{var t=e.getNearestHitFish();if(t)t.x+=e.center.x,t.y+=e.center.y,e.ariver.hitFish(t);else{var n=L.carParkBoxMgr.getCarParkPosition(e);n&&(e.fishState=A.Move,e.ariver.runTopPoint(n))}}},a.getNearestHitFish=function(){var e=null,i=Number.MAX_VALUE;for(var t in this._hitFish){var n=this._hitFish[t];n.fish.node.active&&(n.fish.fishState==A.Idle&&n.distance<i&&(i=n.distance,e=n.hitPoint))}return e?e.clone():null},a.getFishDepth=function(){var e=0;for(var i in this._hitFish){var t=this._hitFish[i];t.fish.node.active&&(t.fish.fishState==A.Idle&&e++)}return e},a.raycastBox=function(){var e=this;e.isCheckHitFish=!0,e._hitFish={};for(var t=[e.leftBottom,e.leftTop,e.rightBottom,e.rightTop,e.centerBottom,e.centerTop],n=t.length,o=0;o<n;o+=2){var r=m.instance.raycast(t[o],t[o+1],k.All,e.rigidBody2D.group);if(x.debugMode&&"fish4"==e.node.name&&F.inst.drawLine(t[o],t[o+1],y.BLACK),r.length>0)for(var a=r.length,s=0;s<a;s++){var c=r[s],l=c.collider.node.parent,h=l.getComponent(i);if(h&&h!=e){if("fish4"==e.node.name){"fish18"==l.name&&F.inst.drawLine(e.leftBottom,b(c.point.x,c.point.y,0),y.RED);for(var u=r[s].collider.node.getComponent(d).worldPoints,f=u.length,S=0;S<f;S++){var g=S+1<f?u[S+1]:u[0];F.inst.drawLine(b(u[S].x,u[S].y,0),b(g.x,g.y,0),y.RED)}}var p=b(c.point.x-t[o].x,c.point.y-t[o].y,0),v=w.len(p);e._hitFish[l.name]?v<e._hitFish[l.name].distance&&(e._hitFish[l.name].distance=v,e._hitFish[l.name].hitPoint=p,e._hitFish[l.name].fish=h):e._hitFish[l.name]={distance:v,hitPoint:p,fish:h}}}}},a.recycleScrew=function(){var e=this,i=L.topicBoxMgr.availableScrew,t=i.length,n=!1;if(e.isCollectAllScrew())return n;for(var o=0,r=0;r<t;r++){var a=i[r];if(a&&a.screwColor==e.fishColor&&!a.useFlag&&(i[r]=null,n=!0,e.screwRecycleAnima(a,.2*o),o++,e.isCollectAllScrew()))return n}return n},a.isCollectAllScrew=function(){return this.collectScrewNum>=this.maxScrewNum},a.screwRecycleAnima=function(e,i,t,n,o){void 0===i&&(i=0),void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null);var r=this,a=r.startScrewIndex+r.collectScrewNum,s=r.screwList[a];t?s.screwColor=t:(s.screwColor=e.screwColor,e.useFlag=!0);var c=e.node.getWorldPosition().clone(),l=e.node.getWorldScale().clone(),h=r.screwPos[a];r._recycleScrewCallBack=n,r._recycleScrewThisObj=o,r.isPlayRecycleScrew=!0,r.collectScrewNum++,s.goToHere(c,h,l,r.screwScale,.3,i,(function(){t?L.colorMgr.addRecycleColorTotal(t):L.colorMgr.addRecycleColorTotal(e.screwColor),e.useFlag&&e.hideScrew(),x.audioMgr.playSound("luosi_out"),s.node.active=!0,L.screwCount.count=L.colorMgr.getSumColorLength()+L.colorMgr.getCurUseColorLength()}),r.recycleScrewCallBack,r)},a.recycleScrewCallBack=function(){var e=this;e._recycleScrewCallBack&&e._recycleScrewCallBack.call(e._recycleScrewThisObj),e.recycleScrewCount++,x.audioMgr.playSound("luosi_in"),e._fishTween&&e._fishTween.stop(),e._fishTween.start()},a.screwRecycleCallBack=function(){var e=this;L.topicBoxMgr.isUpdataAvailableScrew=!0,e.recycleScrewCount>=e.collectScrewNum&&(e.isPlayRecycleScrew=!1),e.recycleScrewCount<e.maxScrewNum||e.isCollectAllScrew()&&(e.fishState=A.Start,L.carParkBoxMgr.deleteCarParkFish(e),e.closeBaskBag())},a.runAngle=function(e,i,t,n){this.ariver.runAngle(e,i,t,n)},a.runChangeColor=function(e,i){this.ariver.runChangeColor(e,i)},a.openBaskBag=function(){var e=this;e.fishState=A.PickUp,e.beibaoSke.setAnimation(0,"dakai"+e.animaAction,!1)},a.closeBaskBag=function(){var e=this;e.updateHoleBox(0),e.beibaoSke.setAnimation(0,"guanbi"+e.animaAction,!1),x.audioMgr.playSound("fishOut"),e.beibaoSke.node.active||e.scheduleOnce((function(){e.ariver.runToHidePoint()}),1)},r(i,[{key:"isYun",get:function(){return this._isYun},set:function(e){this._isYun=e,e?(this.yunSke.node.active=!0,this.yunSke.setAnimation(0,"Yun",!1),x.audioMgr.playSound("hit")):this.yunSke.node.active=!1}},{key:"fishState",get:function(){return this._fishState},set:function(e){this._fishState=e}},{key:"fishColor",get:function(){return this._fishColor},set:function(e){var i=this;switch(i._fishColor=e,e){case T.Blue:i.beibaoSke.setSkin("lan");break;case T.Red:i.beibaoSke.setSkin("hong");break;case T.Green:i.beibaoSke.setSkin("lv");break;case T.Yellow:i.beibaoSke.setSkin("huang");break;case T.Purple:i.beibaoSke.setSkin("zi");break;case T.LightBlue:i.beibaoSke.setSkin("tianlan");break;case T.Orange:i.beibaoSke.setSkin("cheng");break;case T.Pink:i.beibaoSke.setSkin("fen")}i.beibaoSke.setAnimation(0,"guanbidaiji"+i.animaAction,!1)}},{key:"fishSize",get:function(){return this._fishSize},set:function(e){var i=this;this._fishSize=e;var t=this.node.getComponent(v);if(t){var n=0;switch(this._fishSize){case B.size_4:n=0,i.fishSke.setSkin("4"),i.animaAction="3",i.maxScrewNum=4,i.startScrewIndex=4;break;case B.size_6:n=1,i.fishSke.setSkin("6"),i.animaAction="2",i.maxScrewNum=6,i.startScrewIndex=2;break;case B.size_8:n=2,i.fishSke.setSkin("8"),i.animaAction="",i.maxScrewNum=8,i.startScrewIndex=0}i.beibaoSke.setAnimation(0,"guanbidaiji"+i.animaAction,!1),i.updateHoleBox(0),t.setContentSize(i.sizeList[n]),i.boxTrans.size.x=.9*i.sizeList[n].width,i.boxTrans.size.y=.9*i.sizeList[n].height,i.boxTrans.apply()}}},{key:"checkHitFish",get:function(){return 0==this.isCheckHitFish&&this.raycastBox(),!!this.getNearestHitFish()}}]),i}(C)).prototype,"fishSke",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=i(G.prototype,"beibaoSke",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=i(G.prototype,"yunSke",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=i(G.prototype,"editfishColor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return T.Blue}}),J=i(G.prototype,"editfishSize",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.size_4}}),K=i(G.prototype,"fishStateLabel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=i(G.prototype,"weibaoNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=i(G.prototype,"rigidBody2D",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=i(G.prototype,"boxTrans",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=G))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./EventManger.ts","./Global.ts","./ResourceManger.ts","./screwGlobal.ts"],(function(e){var t,n,i,r,o,a,l,s,c,u,p,g,h,m,f,v,d,b,C,w,S,B,y,k,U,F,M,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass,a=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,u=e.Node,p=e.Sprite,g=e.sp,h=e.Label,m=e.Widget,f=e.Button,v=e.assetManager,d=e.SpriteFrame,b=e.Component},function(e){C=e.events,w=e.PropertyType,S=e.FishState,B=e.settingUIShowType,y=e.GameType,k=e.GameMode},function(e){U=e.default},function(e){F=e.Global},function(e){M=e.default},function(e){I=e.screwGlobal}],execute:function(){var G,L,P,T,x,A,z,_,E,D,N,R,H,O,V,j,K,W,X,Z,q,J,Q,Y,$,ee,te;s._RF.push({},"fa538sTtKVF6rtGVFVDzXEL","GameScene",void 0);var ne=c.ccclass,ie=c.property;e("GameScene",(G=ne("GameScene"),L=ie(u),P=ie(u),T=ie(u),x=ie(u),A=ie(u),z=ie(u),_=ie(p),E=ie(u),D=ie(g.Skeleton),N=ie(h),R=ie(u),H=ie(h),G((j=t((V=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"settingBtn",j,r(t)),i(t,"autoUpBtn",K,r(t)),i(t,"resetColorBtn",W,r(t)),i(t,"insertBtn",X,r(t)),i(t,"selectFishbg",Z,r(t)),t.selectFishCount=0,i(t,"notUserClickBg",q,r(t)),i(t,"photoImg",J,r(t)),i(t,"btnGroup",Q,r(t)),i(t,"nanduSke",Y,r(t)),i(t,"debugLabel",$,r(t)),t._isShowBtn=void 0,i(t,"gameSceneNewUserTip",ee,r(t)),i(t,"levelCount",te,r(t)),t.isAutoUpAnima=!1,t.animaCount=0,t.maxLevel=9,t.curLevelConfIndex=0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){I.gameMgr=this;var e=this;e.settingBtn.on(u.EventType.TOUCH_END,e.clickSettingBtn,e),e.autoUpBtn.on(u.EventType.TOUCH_END,(function(){e.autoUpBtn.getComponent(p).grayscale||e.checkFishAnima()&&U.inst.event.emit(C.propertyUIShow,w.autoUpScrew)}),e),e.resetColorBtn.on(u.EventType.TOUCH_END,(function(){e.checkFishAnima()&&U.inst.event.emit(C.propertyUIShow,w.changeColor)}),e),e.insertBtn.on(u.EventType.TOUCH_END,(function(){e.checkFishAnima()&&I.carParkBoxMgr.isCheckFishIsMove()&&U.inst.event.emit(C.propertyUIShow,w.forceSelect)}),e);for(var t=e.node.getComponentsInChildren(m),n=t.length,i=0;i<n;i++){t[i].updateAlignment()}e.nanduSke.setEndListener((function(t){e.nanduSke.node.active=!1}))},s.checkFishAnima=function(){for(var e=I.carParkBoxMgr.getCarParkFish(8),t=e.length,n=0;n<t;n++){if(e[n].isPlayRecycleScrew)return!1}return!0},s.clickAutoUpBtn=function(){0!=I.carParkBoxMgr.getCarParkFish(3).length&&(F.isPlayProper=!0,U.inst.event.emit(C.autoGameUIShow))},s.updateAutoUpBtn=function(){for(var e=I.carParkBoxMgr.getCarParkFish(3),t=this.autoUpBtn.getComponentsInChildren(p),n=t.length,i=0;i<n;i++){t[i].grayscale=0==e.length}this.autoUpBtn.getComponent(f).interactable=e.length>0},s.autoGameFish=function(){var e=this,t=I.carParkBoxMgr.getCarParkFish(3);if(0!=t.length){var n=I.topicBoxMgr.getScrewPosList(),i=0,r=t.length,o=1;e.isAutoUpAnima=!0;for(var a=0;a<r;a++)for(var l=t[a],s=l.fishColor;!l.isCollectAllScrew();){e.animaCount++;var c=void 0;if(n.showDist[s]&&n.showDist[s].length>0)c=n.showDist[s].shift(),l.screwRecycleAnima(c,.1*o,null,e.animaEnd,e);else{if(c=n.notShow[i],I.colorMgr.checkSumColorTotal(s))I.colorMgr.addCurUseColorTotal(s);else{for(var u=n.notShow.length,p=0;p<u;p++)if(n.notShow[p].screwColor==s){c=n.notShow[p],n.notShow.splice(p,1);break}c.useFlag=!0}l.screwRecycleAnima(c,.1*o,s,e.animaEnd,e),++i>=n.notShow.length&&(i=0)}o++}F.isPlayProper=!1}},s.animaEnd=function(){var e=this;e.animaCount--,e.animaCount>0||(e.isAutoUpAnima=!1,e.notUserClickBg.active=!1)},s.clickResetColorBtn=function(){for(var e=I.carParkBoxMgr.getFishList(),t=e.length,n=0;n<t;n++){var i=e[n];if(i.fishState==S.Move||i.fishState==S.Start)return}this.isShowBtn=!1,this.notUserClickBg.active=!0,I.carParkBoxMgr.moveToChangeColorFish()},s.clickInsertBtn=function(){var e=this;I.carParkBoxMgr.isCheckFishIsMove()&&(e.isShowBtn=!1,e.selectFishCount=0,e.selectFishbg.active=!0)},s.clickSettingBtn=function(){U.inst.event.emit(C.settingUIShow,B.game)},s.onEnable=function(){var e=this;if(F.curGameType=y.badingzi,F.bdz_gameId++,e.levelCount.node.parent.active=F.curGameMode==k.normal,F.traceMgr.BDZ_reportGameStart(F.gameLevel),I.screwCount.node.active=!0,F.curGameMode==k.yardMode){var t=M.instance.lastSceneSaveValue;if(t.length>0&&t[0]>-1){var n=v.getBundle("yardRes").get("Image/photo/photo"+t[0]+"/spriteFrame",d);e.photoImg.spriteFrame=n,e.photoImg.node.active=!0}else e.photoImg.node.active=!1}else e.photoImg.node.active=!1;e.selectFishbg.active=!1,e.curLevelConfIndex=F.curLevelConfIndex,e.gameSceneNewUserTip.active=1==F.gameLevel&&F.isNewUser,e.levelCount.string=F.gameLevel+"",setTimeout((function(){var t=M.instance.get_json("fishLevel_"+e.curLevelConfIndex);I.carParkBoxMgr.setConf(t.childs)}),0)},s.resetGame=function(){var e=a(l().mark((function e(){var t,n,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,n=M.instance.get_json("plankLevel_"+t.curLevelConfIndex),e.next=4,I.topicBoxMgr.setConf(n.plankConf);case 4:t.updateAutoUpBtn(),t.scheduleOnce((function(){U.inst.event.emit(C.loadResUIHide),2!=F.gameLevel&&F.curGameMode!=k.yardMode||(i.nanduSke.node.active=!0,i.nanduSke.setAnimation(0,"NanDu",!1))}),.5);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o(t,[{key:"isShowBtn",get:function(){return this._isShowBtn},set:function(e){this._isShowBtn=e,this.btnGroup.active=e}}]),t}(b)).prototype,"settingBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(V.prototype,"autoUpBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(V.prototype,"resetColorBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(V.prototype,"insertBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(V.prototype,"selectFishbg",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(V.prototype,"notUserClickBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(V.prototype,"photoImg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(V.prototype,"btnGroup",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(V.prototype,"nanduSke",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(V.prototype,"debugLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(V.prototype,"gameSceneNewUserTip",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(V.prototype,"levelCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=V))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/gameSceneNewUserTipUi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./blackMask.ts","./screwGlobal.ts"],(function(e){var o,a,n,t,i,r,c,l,s,d,u,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.Node,l=e.Widget,s=e.UITransform,d=e.Component},function(e){u=e.blackMask},function(e){p=e.screwGlobal}],execute:function(){var g,k,h,b,v,N,f,m,M,C,y;i._RF.push({},"bca0aLWe2ROjIgNp63SaJsp","gameSceneNewUserTipUi",void 0);var w=r.ccclass,P=r.property;e("gameSceneNewUserTipUi",(g=w("gameSceneNewUserTipUi"),k=P([c]),h=P(c),b=P(c),v=P(u),g((m=o((f=function(e){function o(){for(var o,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return o=e.call.apply(e,[this].concat(i))||this,n(o,"dialogNode",m,t(o)),n(o,"clickNode",M,t(o)),n(o,"handMoveNode",C,t(o)),n(o,"blackMask",y,t(o)),o.stepCount=0,o.animaCount=0,o}a(o,e);var i=o.prototype;return i.onLoad=function(){var e=this;e.blackMask.node.on(c.EventType.TOUCH_END,e.onNext,e),e.clickNode.on(c.EventType.TOUCH_END,e.onNext,e),e.handMoveNode.active=!1,e.stepCount=0},i.onEnable=function(){for(var e=this,o=e.node.parent.getComponentsInChildren(l),a=0;a<o.length;a++)o[a].enabled=!0,o[a].updateAlignment();e.stepCount=0,e.animaCount=0,e.onNext()},i.onNext=function(){var e=this;switch(e.stepCount++,e.stepCount){case 1:e.handMoveNode.active=!1,e.blackMask.node.active=!0,e.showDialog(0);break;case 2:var o=p.carParkBoxMgr.getFishList()[0].node.getWorldPosition(),a=e.blackMask.getComponent(s).convertToNodeSpaceAR(o);e.blackMask.setPosi(a.x,a.y,120,120),e.showDialog(1);break;case 3:p.carParkBoxMgr.getFishList()[0].handleClick();var n=p.carParkBoxMgr.carParkList[0].node.getWorldPosition(),t=e.blackMask.getComponent(s).convertToNodeSpaceAR(n);e.blackMask.setPosi(t.x,t.y,130,130),e.showDialog(2);break;case 4:e.blackMask.node.active=!1,e.handMoveNode.active=!0,e.showDialog(3),e.doPlayAnima();break;case 5:p.carParkBoxMgr.getFishList()[e.animaCount].handleClick(),e.node.active=!1}},i.showDialog=function(e){for(var o=this,a=o.dialogNode.length,n=0;n<a;n++)o.dialogNode[n].active=n==e},i.doPlayAnima=function(){var e=this;if(e.animaCount++,!(e.animaCount>=e.dialogNode.length)){var o=p.carParkBoxMgr.getFishList()[e.animaCount].node.getWorldPosition();e.handMoveNode.setWorldPosition(o)}},o}(d)).prototype,"dialogNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=o(f.prototype,"clickNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(f.prototype,"handMoveNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(f.prototype,"blackMask",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=f))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/hole.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,n,t,r,o,l,a,c,u,p,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.RigidBody2D,c=e.HingeJoint2D,u=e.DistanceJoint2D,p=e.FixedJoint2D,d=e.Component}],execute:function(){var s,g,y,h,f,b,v,D,B,m,w;o._RF.push({},"646b6yln7dFOrZjAMldU7Rv","hole",void 0);var z=l.ccclass,x=l.property;e("hole",(s=z("hole"),g=x({type:a}),y=x({type:c}),h=x({type:u}),f=x({type:p}),s((D=i((v=function(e){function i(){for(var i,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return i=e.call.apply(e,[this].concat(o))||this,t(i,"rigidBody",D,r(i)),t(i,"hinge",B,r(i)),t(i,"distance",m,r(i)),t(i,"fixed",w,r(i)),i}n(i,e);var o=i.prototype;return o.onLoad=function(){this.rigidBody=this.getComponent(a)},o.bindHingeJoint2D=function(e,i,n){var t=this;e&&(t.hinge.connectedBody=e,t.rigidBody.group=e.group,t.rigidBody.wakeUp()),t.hinge.connectedAnchor.set(i,n),t.hinge.enabled=!0,t.hinge.apply()},o.update=function(e){this.hinge.apply()},i}(d)).prototype,"rigidBody",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(v.prototype,"hinge",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(v.prototype,"distance",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(v.prototype,"fixed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/holeImg.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var c;o._RF.push({},"737188BrqxIpZKhcuLQgx9J","holeImg",void 0);var u=n.ccclass;n.property,t("holeImg",u("holeImg")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.update=function(t){},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/plankGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePlank.ts","./screwGlobal.ts"],(function(n){var t,e,a,r,o,i,s,l,c,u,p,k,h,f,v;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,a=n.initializerDefineProperty,r=n.assertThisInitialized,o=n.createClass,i=n.asyncToGenerator,s=n.regeneratorRuntime},function(n){l=n.cclegacy,c=n._decorator,u=n.Prefab,p=n.Color,k=n.instantiate,h=n.Component},function(n){f=n.basePlank},function(n){v=n.screwGlobal}],execute:function(){var d,g,L,C,P;l._RF.push({},"61ceau3oSRPJI4Juael37ZK","plankGroup",void 0);var m=c.ccclass,_=c.property;n("plankGroup",(d=m("plankGroup"),g=_(u),d((P=t((C=function(n){function t(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return t=n.call.apply(n,[this].concat(o))||this,a(t,"copyPlank",P,r(t)),t._hitGroud=0,t.conf=[],t.plankList=[],t.plankPool=[],t.maskColor_ind_1=new p(147,126,108,204),t.maskColor_ind_2=new p(132,83,61,255),t.maskColor_ind_3=new p(109,109,109,153),t.isMaskActive=null,t}e(t,n);var l=t.prototype;return l.onLoad=function(){this.plankPool=this.node.getComponentsInChildren(f)},l.setConf=function(){var n=i(s().mark((function n(t){var e;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=this).conf=t,e.plankList.length=0,n.next=5,e.frameCreatePlank();case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),l.frameCreatePlank=function(){var n=i(s().mark((function n(){var t,e,a,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=(t=this).conf.length,a=0;case 3:if(!(a<e)){n.next=11;break}if(r=t.conf[a],!(v.colorMgr.getSumColorLength()<=0)){n.next=7;break}return n.abrupt("break",11);case 7:t.createPlank(r);case 8:a++,n.next=3;break;case 11:t.plankList.length<=0?t.node.active=!1:t.checkAllPlank();case 12:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),l.createPlank=function(n){var t=this;try{var e=k(t.copyPlank);e.setScale(n.scaleX,n.scaleY),t.node.addChild(e);var a=e.getComponent(f);a.changePhysicsGroup(t.hitGroud),a.setPlankConf(n,t),a.node.active=!0,a.node.name=t.node.name+"_"+t.plankList.length,t.plankList.push(a)}catch(n){console.error("手动抛出",n)}},l.resetAllPlank=function(){for(var n=this.plankList,t=n.length,e=0;e<t;e++)n[e].resetConf()},l.updataShowPlank=function(){var n=this;n.node.getSiblingIndex()<3?n.setMaskActive(!0):n.setMaskActive(!1),n.setColorMask()},l.setColorMask=function(){var n=this,t=n.node.getSiblingIndex(),e=p.WHITE;0==t?e=n.maskColor_ind_1:1==t?e=n.maskColor_ind_2:2==t&&(e=n.maskColor_ind_3);for(var a=n.plankList.length,r=0;r<a;r++)n.plankList[r].setColorMask(e)},l.setMaskActive=function(n){var t=this;t.isMaskActive=n;for(var e=t.plankList.length,a=0;a<e;a++)t.plankList[a].setMaskActive(n)},l.checkScrewIsAvailable=function(){for(var n=this,t=n.plankList.length,e=0;e<t;e++)n.plankList[e].node.active&&n.plankList[e].checkScrewIsAvailable()},l.checkAllPlank=function(){for(var n=this,t=n.plankList.length,e=0;e<t;e++)n.plankList[e].node.active||(n.plankList.splice(e,1),e--,t--);return n.plankList.length<=0&&(v.topicBoxMgr.movePlankGroup(n),!0)},l.getScrewList=function(){for(var n=this.plankList.length,t=[],e=0;e<n;e++)t.push.apply(t,this.plankList[e].getScrewList());return t},o(t,[{key:"hitGroud",get:function(){return this._hitGroud},set:function(n){this._hitGroud=n}}]),t}(h)).prototype,"copyPlank",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=C))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/screw.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./textDraw.ts","./Global.ts","./HitPolygon.ts"],(function(e){var o,n,t,i,r,l,s,c,a,u,p,d,h,f,g,v,w,y,b;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){l=e.cclegacy,s=e._decorator,c=e.SpriteFrame,a=e.Sprite,u=e.v3,p=e.UITransform,d=e.PhysicsSystem2D,h=e.PolygonCollider2D,f=e.RigidBody2D,g=e.tween,v=e.Component},function(e){w=e.FishColor},null,function(e){y=e.Global},function(e){b=e.HitPolygon}],execute:function(){var P,m,C,S,_,k,F;l._RF.push({},"eb61ckHWYFNwpP6M1UREZVJ","screw",void 0);var T=s.ccclass,B=s.property;e("screw",(P=T("screw"),m=B([c]),C=B(a),P((k=o((_=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return o=e.call.apply(e,[this].concat(r))||this,t(o,"colorList",k,i(o)),t(o,"showSpr",F,i(o)),o.bindHole=null,o.bindPlank=null,o.checkPoint=[u(-10,6,0),u(6,9,0),u(9,-7,0),u(-8,-9,0)],o._screwColor=w.Blue,o._useFlag=!1,o._moveTween=null,o.byMove=u(0,40),o.byScale=u(.15,.15),o}n(o,e);var l=o.prototype;return l.onLoad=function(){},l.checkIsAvailable=function(){for(var e=this,o=e.node.getComponent(p).getBoundingBoxToWorld(),n=d.instance.testAABB(o),t=n.length,i=0;i<t;i++){var r=n[i];if(1!=y.compareNodeOrder(e.node,r.node)){var l=r.node.getComponent(h);if(l&&e.checkPointInPolygon(e.checkPoint,l))return}}screwGlobal.topicBoxMgr.availableScrew.push(e)},l.checkPointInPolygon=function(e,o){var n=this.node.getComponent(p),t=e.length,i=[];i.length=0,i.push.apply(i,o.worldPoints);for(var r=u(0,0,0),l=0;l<t;l++)if(n.convertToWorldSpaceAR(e[l],r),b.PointInPolygon(r,i,i.length))return!y.isChildOf(this.node,o.node);return!1},l.setColliderGroup=function(e){this.node.getComponent(f).group=e},l.onDisable=function(){},l.onEnable=function(){this.useFlag=!1},l.hideScrew=function(){var e=this;e.bindHole&&(e.bindHole.node.active=!1),e.node.active=!1,e.bindPlank.noticePlank()},l.copyScrewInfo=function(e){e.screwColor=this.screwColor},l.goToHere=function(e,o,n,t,i,r,l,s,c){void 0===r&&(r=0),void 0===l&&(l=null),void 0===s&&(s=null),void 0===c&&(c=null);var a=this;a._moveTween&&(a._moveTween.stop(),a._moveTween=null),a.node.setWorldPosition(e),a.node.setWorldScale(n),a._moveTween=g(a.node).delay(r).call((function(){l&&l.call(c)})).by(.2,{position:a.byMove,scale:a.byScale},{easing:"sineIn"}).delay(.1).to(i,{position:o,scale:t}).call((function(){s&&s.call(c)})).start()},r(o,[{key:"screwColor",get:function(){return this._screwColor},set:function(e){this._screwColor=e,this.showSpr&&(this.showSpr.spriteFrame=this.colorList[e-1])}},{key:"useFlag",get:function(){return this._useFlag},set:function(e){this._useFlag=e}}]),o}(v)).prototype,"colorList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=o(_.prototype,"showSpr",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=_))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/screwCount.ts",["./rollupPluginModLoBabelHelpers.js","cc","./screwGlobal.ts"],(function(t){var e,n,r,o,c,i,s,u,l,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,c=t.createClass},function(t){i=t.cclegacy,s=t._decorator,u=t.Label,l=t.Component},function(t){a=t.screwGlobal}],execute:function(){var p,f,h,b,y;i._RF.push({},"7dfc18+EZVBs6koLsU8C6fK","screwCount",void 0);var w=s.ccclass,C=s.property;t("screwCount",(p=w("screwCount"),f=C(u),p((y=e((b=function(t){function e(){for(var e,n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c))||this,r(e,"label",y,o(e)),e._count=0,e}return n(e,t),e.prototype.onLoad=function(){a.screwCount=this},c(e,[{key:"count",get:function(){return this._count},set:function(t){this._count=t,this.label.string=this._count+""}}]),e}(l)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/screwGlobal.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColorManagr.ts","./Enums.ts"],(function(e){var t,o,n,r,a,l;return{setters:[function(e){t=e.createClass},function(e){o=e.cclegacy,n=e.sys},function(e){r=e.ColorManagr},function(e){a=e.GameMode,l=e.GameType}],execute:function(){o._RF.push({},"99b93lFAChFeINYn2ddGJ7G","screwGlobal",void 0);var u=e("screwGlobal",function(){function e(){}return t(e,null,[{key:"bdz_gameId",get:function(){return parseInt(n.localStorage.getItem("bdz_gameId")||"0")},set:function(e){n.localStorage.setItem("bdz_gameId",e.toString())}},{key:"gameLevel",get:function(){return parseInt(n.localStorage.getItem("gameLevel")||"1")},set:function(e){n.localStorage.setItem("gameLevel",e.toString())}},{key:"puzzle_count",get:function(){return parseInt(n.localStorage.getItem("puzzleCount")||"0")},set:function(e){n.localStorage.setItem("puzzleCount",e.toString())}},{key:"curLevelConfIndex",get:function(){return e.gameLevel<=11?e.gameLevel:e.conf[e.gameLevel%e.conf.length]}},{key:"puzzle_index",get:function(){return parseInt(n.localStorage.getItem("puzzleIndex")||"0")},set:function(e){n.localStorage.setItem("puzzleIndex",e%4+"")}},{key:"puzzlePositionList",get:function(){var e=JSON.parse(n.localStorage.getItem("puzzlePositionList")||"[]");if(0==e.length)for(var t=0;t<400;t++)e.push(1);return e},set:function(e){if(0==e.length)for(var t=0;t<400;t++)e.push(1);n.localStorage.setItem("puzzlePositionList",JSON.stringify(e))}},{key:"maxRoleCount",get:function(){return 4}},{key:"maxPhotoCount",get:function(){return 4}},{key:"roleIdList",get:function(){return JSON.parse(n.localStorage.getItem("roleIdList")||"[]")},set:function(e){n.localStorage.setItem("roleIdList",JSON.stringify(e))}},{key:"roleState",get:function(){var t=JSON.parse(n.localStorage.getItem("roleState")||"[]");if(0==t.length)for(var o=0;o<e.maxRoleCount;o++)t.push(0);return t},set:function(e){n.localStorage.setItem("roleState",JSON.stringify(e))}},{key:"postcardState",get:function(){var t=JSON.parse(n.localStorage.getItem("postcardState")||"[]");if(0==t.length)for(var o=0;o<e.maxPhotoCount;o++)t.push(0);return t},set:function(e){n.localStorage.setItem("postcardState",JSON.stringify(e))}}]),e}());u.screwCount=void 0,u.carParkBoxMgr=void 0,u.topicBoxMgr=void 0,u.gameMgr=void 0,u.colorMgr=new r,u.textCount=0,u.debugGraphics=void 0,u.curGameMode=a.normal,u.curGameType=l.badingzi,u.isOpenSetting=!1,u.isUserProper=!1,u.isPlayAd=!1,u.isPlayProper=!1,u.conf=[7,4,11,2,9,4,3,10,8,5,6,10,2,9,4,2,11,7,3,8,5,10,6,2,9,4,5,11,7,3,8,10,5,6,2,9,4,6,7,3,8,11,5,10,6,2,9,4,5,7,11,3,8,10,5,6],o._RF.pop()}}}));

System.register("chunks:///_virtual/screwRes",["./GameScene.ts","./autoAriverAI.ts","./autoGameUI.ts","./basePlank.ts","./carParkBoxManagr.ts","./fish.ts","./gameSceneNewUserTipUi.ts","./hole.ts","./holeImg.ts","./plankGroup.ts","./screw.ts","./screwCount.ts","./screwGlobal.ts","./shitou.ts","./textDraw.ts","./textLevel.ts","./topicBoxManagr.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/shitou.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./ThirdPartyManager.ts"],(function(e){var o,i,n,r,t,s,c,a,l,u,d,h,v;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,t=e.createClass},function(e){s=e.cclegacy,c=e._decorator,a=e.Node,l=e.Color,u=e.Sprite,d=e.Component},function(e){h=e.Global},function(e){v=e.ThirdPartyManager}],execute:function(){var p,y,f,T,S,C,g;s._RF.push({},"663924GM41JRY89Xghj3vna","shitou",void 0);var _=c.ccclass,E=c.property,P=e("UnlockType",function(e){return e[e.None=0]="None",e[e.Video=1]="Video",e[e.Share=2]="Share",e}({}));e("shitou",(p=_("shitou"),y=E(a),f=E(a),p((C=o((S=function(e){function o(){for(var o,i=arguments.length,t=new Array(i),s=0;s<i;s++)t[s]=arguments[s];return(o=e.call.apply(e,[this].concat(t))||this)._isUser=void 0,o.videoColor=new l(112,112,112),n(o,"videoIcon",C,r(o)),n(o,"shareIcon",g,r(o)),o._lockType=void 0,o.videoSuccessCall=void 0,o.videoSuccessThis=void 0,o}i(o,e);var s=o.prototype;return s.onTouchEnd=function(){var e=this;e.isUser==P.Share?v.instance.shareAppMessage(e.onPlayAdSuccess,e):h.videoCount>0?(e.onPlayAdSuccess(),h.videoCount-=1):h.videoADMgr.showVideo(e.onPlayAdSuccess,e,e.onPlayAdError)},s.setVideoSuccessCall=function(e,o){this.videoSuccessCall=e,this.videoSuccessThis=o},s.onPlayAdSuccess=function(){var e=this;e.videoSuccessCall&&e.videoSuccessCall.call(e.videoSuccessThis)},s.onPlayAdError=function(){},t(o,[{key:"lockType",get:function(){return this._lockType},set:function(e){this._lockType=e}},{key:"isUser",get:function(){return this._isUser},set:function(e){var o=this;o._isUser=e;var i=o.node.getComponent(u);o.videoIcon.active=e==P.Video,o.shareIcon.active=e==P.Share,e==P.None?(i.color=l.WHITE,o.node.off(a.EventType.TOUCH_END,o.onTouchEnd,o)):(i.color=o.videoColor,o.node.on(a.EventType.TOUCH_END,o.onTouchEnd,o))}}]),o}(d)).prototype,"videoIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=o(S.prototype,"shareIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/textDraw.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./screwGlobal.ts"],(function(t){var n,o,e,r,c,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.Graphics,t.UITransform,c=t.Component},function(t){a=t.Global},function(t){i=t.screwGlobal}],execute:function(){var s,u;o._RF.push({},"86667ZkiPZOZJ4NhwBDdKgS","textDraw",void 0);var l=e.ccclass;e.property,t("textDraw",l("textDraw")(((u=function(t){function o(){for(var n,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this).g=void 0,n}n(o,t);var e=o.prototype;return e.onLoad=function(){var t=this;t.g=t.node.getComponent(r),i.debugGraphics=t.g,o.inst=t},e.clear=function(){a.debugMode&&this.g.clear()},e.drawLine=function(t,n,o){a.debugMode},o}(c)).inst=void 0,s=u))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/textLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fish.ts"],(function(e){var t,r,n,o,i,l,a,s,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){l=e.cclegacy,a=e._decorator,s=e.CCBoolean,u=e.Component},function(e){c=e.fish}],execute:function(){var p,y,d,m,f;l._RF.push({},"a16edOA7q1HjZj1MqggOPYa","textLevel",void 0);var h=a.ccclass,g=a.property;e("textLevel",(p=h("textLevel"),y=g({displayName:"更新所有子节点",type:s,tooltip:"点击更新所有子节点"}),p((f=t((m=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i))||this,n(t,"_dummy",f,o(t)),t}return r(t,e),t.prototype.updateAllChildren=function(){var e=this.node.getComponentsInChildren(c);console.log("arr",e)},i(t,[{key:"dummy",get:function(){return this._dummy},set:function(e){e&&this.updateAllChildren(),this._dummy=!1}}]),t}(u)).prototype,"_dummy",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(m.prototype,"dummy",[y],Object.getOwnPropertyDescriptor(m.prototype,"dummy"),m.prototype),d=m))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/topicBoxManagr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePlank.ts","./plankGroup.ts","./screwGlobal.ts"],(function(e){var t,n,r,o,a,i,c,s,l,u,p,f,d,h,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,l=e.Node,u=e.RigidBody2D,p=e.ERigidBody2DType,f=e.Component},function(e){d=e.basePlank},function(e){h=e.plankGroup},function(e){v=e.screwGlobal}],execute:function(){var g,w,C,P,k;c._RF.push({},"973357B3/VBcqsaMGFTiz8h","topicBoxManagr",void 0);var m=s.ccclass,S=s.property;e("topicBoxManagr",(g=m("topicBoxManagr"),w=S(l),g((k=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t=e.call.apply(e,[this].concat(a))||this,r(t,"content",k,o(t)),t.topic=void 0,t.plankPool=[],t.screwPool=[],t.conf=[],t.PG_NodeList=[],t.curTopicIndex=0,t.frameCount=6,t.availableScrew=[],t.updataAvailableScrewCount=0,t.isUpdataAvailableScrew=!1,t}n(t,e);var c=t.prototype;return c.onLoad=function(){var e=this;e.topic=e.content.getChildByName("checkpoint_1"),v.topicBoxMgr=e,e.PG_NodeList=e.content.getComponentsInChildren(h),e.plankPool=e.content.getComponentsInChildren(d);for(var t=e.PG_NodeList.length,n=0;n<t;n++){e.PG_NodeList[n].hitGroud=4<<n}},c.start=function(){},c.setConf=function(){var e=a(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=this).conf=t,n.curTopicIndex=t.length,n.frameCount=n.PG_NodeList.length,n.frameSetConfPlank();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.frameSetConfPlank=function(){var e=a(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this).frameCount--,!(t.frameCount<0)){e.next=5;break}return t.frameSetConfPlankEnd(),e.abrupt("return");case 5:(n=t.PG_NodeList[t.frameCount]).node.setSiblingIndex(t.frameCount),t.curTopicIndex-1>=0?(n.node.active=!0,n.setConf(t.getTopicConf())):n.node.active=!1,setTimeout((function(){t.frameSetConfPlank()}),0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.frameSetConfPlankEnd=function(){var e=a(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this).isUpdataAvailableScrew=!0,t.movePlankGroup(null);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.getTopicConf=function(){var e=this;return e.curTopicIndex=e.curTopicIndex-1,e.conf[e.curTopicIndex]},c.movePlankGroup=function(e){var t=this;e&&(e.node.setSiblingIndex(0),t.curTopicIndex-1>=0&&e.setConf(t.getTopicConf()));for(var n=t.PG_NodeList.length,r=0;r<n;r++)t.PG_NodeList[r].updataShowPlank();t.isUpdataAvailableScrew=!0},c.updataAvailableScrew=function(){var e=this;e.availableScrew.length=0;for(var t=e.PG_NodeList,n=t.length,r=0;r<n;r++){var o=t[r];!o.isMaskActive&&o.node.active&&o.checkScrewIsAvailable()}e.recycleScrew()},c.getScrewPosList=function(){for(var e=this.PG_NodeList,t=e.length,n=[],r={},o=0;o<t;o++){var a=e[o],i=a.getScrewList();if(a.isMaskActive)n.push.apply(n,i);else for(var c=i.length,s=0;s<c;s++){var l=i[s];l.useFlag||(null==r[l.screwColor]&&(r[l.screwColor]=[]),r[l.screwColor].push(l))}}return{showDist:r,notShow:n}},c.update=function(e){var t=this;t.isUpdataAvailableScrew&&(t.updataAvailableScrew(),t.isUpdataAvailableScrew=!1)},c.getCheckAllPlank=function(){for(var e=this.content.getComponentsInChildren(d),t=e.length,n=0;n<t;n++){var r=e[n];if(r.node.getComponent(u).type==p.Dynamic&&r.getLastStatus(!0))return!0}return!1},c.recycleScrew=function(){v.carParkBoxMgr.recycleCarParkFishScrew()},t}(f)).prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=P))||C));c._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/screwRes', 'chunks:///_virtual/screwRes'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});